
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../reference/tweak_files/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Quickstart - ComfyTweaker Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#quickstart" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ComfyTweaker Documentation" class="md-header__button md-logo" aria-label="ComfyTweaker Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ComfyTweaker Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Quickstart
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ComfyTweaker Documentation" class="md-nav__button md-logo" aria-label="ComfyTweaker Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ComfyTweaker Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#random-values" class="md-nav__link">
    <span class="md-ellipsis">
      Random Values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecting-random-files" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting Random Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cycling-through-files" class="md-nav__link">
    <span class="md-ellipsis">
      Cycling through Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reusing-random-values" class="md-nav__link">
    <span class="md-ellipsis">
      Reusing Random Values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering-by-name" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering By Name
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-images" class="md-nav__link">
    <span class="md-ellipsis">
      Loading Images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wildcards" class="md-nav__link">
    <span class="md-ellipsis">
      Wildcards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wildcards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backrefs" class="md-nav__link">
    <span class="md-ellipsis">
      Backrefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-weights" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Weights
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tweak_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tweak Files Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../errata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errata
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#random-values" class="md-nav__link">
    <span class="md-ellipsis">
      Random Values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecting-random-files" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting Random Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cycling-through-files" class="md-nav__link">
    <span class="md-ellipsis">
      Cycling through Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reusing-random-values" class="md-nav__link">
    <span class="md-ellipsis">
      Reusing Random Values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering-by-name" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering By Name
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-images" class="md-nav__link">
    <span class="md-ellipsis">
      Loading Images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wildcards" class="md-nav__link">
    <span class="md-ellipsis">
      Wildcards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wildcards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backrefs" class="md-nav__link">
    <span class="md-ellipsis">
      Backrefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-weights" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Weights
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="quickstart">Quickstart</h1>
<p>Enable "Node ID Badges" in your ComfyUI settings if you haven't.</p>
<p>Open an image in ComfyUI and note the id of the prompt node.</p>
<p>Run the GUI with
<div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>comfy-tweaker
</span></code></pre></div>
or from an installed exe.</p>
<p>Drag and drop your image image into Comfy Tweaker.</p>
<p>Create a yaml file and use the node id to define changes.</p>
<p>For example, if the node id was 20, the following would change the text value of the node to "an old man sitting on a bench":</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">      </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">        </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;An</span><span class="nv"> </span><span class="s">old</span><span class="nv"> </span><span class="s">man</span><span class="nv"> </span><span class="s">sitting</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">bench.&quot;</span>
</span></code></pre></div>
<p>Drag and drop this yaml file into Comfy Tweaker. Click <code>Add Job</code>, then click <code>Start</code>. When the job finishes, right click it in the list, then select <code>Go To Folder</code> to jump the output folder.</p>
<p>The image should contain an old man sitting on a bench.</p>
<p>You can save the tweaked workflow without generating it by clicking the <code>Save As...</code> button.</p>
<hr />
<p>You can also refer to a node by its name.</p>
<p>For example, if your prompt node was named "Positive Prompt", this tweak would have the same effect:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Positive</span><span class="nv"> </span><span class="s">Prompt&quot;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">      </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">        </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;An</span><span class="nv"> </span><span class="s">old</span><span class="nv"> </span><span class="s">man</span><span class="nv"> </span><span class="s">sitting</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">bench.&quot;</span>
</span></code></pre></div>
<p>Usually the name of the input is the same as its placeholder text. If you don't see the name of the input you're trying to change, right click the node in ComfyUI and hover over "Convert Widget to Input" and it should be there.</p>
<h2 id="random-values">Random Values</h2>
<p>Tweak files support an extended Jinja syntax for dynamically generated values.</p>
<p>For example, the following tweak randomly sets the strength of "Lora Loader 1" between 0 and 1 every time the workflow runs.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">1&quot;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">      </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">        </span><span class="nt">model_strength</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">random_float(0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1)</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<p>You can make a random choice from a list with <code>random_choice</code>.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">1&quot;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">      </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">        </span><span class="nt">lora_name</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">random_choice(</span><span class="p p-Indicator">[</span><span class="s">&quot;lora1.safetensors&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;lora2.safetensors&quot;</span><span class="p p-Indicator">]</span><span class="nv">)</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<h2 id="selecting-random-files">Selecting Random Files</h2>
<p>After setting your models folder under <code>Edit&gt;Preferences</code>, you can dynamically select files from it. The following tweak will select a random file in the lora models folder.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">1&quot;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="w w-Error"> </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">        </span><span class="nt">lora_name</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">from_models_folder(&quot;lora&quot;)</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<p>By default, it only selects ".safetensors" files, but it also supports other file patterns. The following would select a random ".pth" file.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">1&quot;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="w w-Error"> </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">        </span><span class="nt">lora_name</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">from_models_folder(&quot;lora&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">file_glob=&quot;*.pth&quot;)</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<p>You can also specify an absolute path with the <code>from_folder</code> function.</p>
<h2 id="cycling-through-files">Cycling through Files</h2>
<p>You can cycle through the files in a folder using the cycle keyword argument. The following example would use the next LorA in the folder every time the workflow runs.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">1&quot;</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="w w-Error"> </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">        </span><span class="nt">lora_name</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">from_models_folder(&quot;lora&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">cycle=True)</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<h2 id="reusing-random-values">Reusing Random Values</h2>
<p>You can use Jinja variables to reuse any generated values. The following example would use the same weight for boths LorAs.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p p-Indicator">{</span><span class="err">%</span><span class="w"> </span><span class="nv">set random_value = random_int(0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100) %</span><span class="p p-Indicator">}</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">1&quot;</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">      </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">        </span><span class="nt">strength</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">random_value</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">2&quot;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">      </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">        </span><span class="nt">strength</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">random_value</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<p>This is useful for naming outputs while cycling through files. The following example would include the lora name in the workflow output.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p p-Indicator">{</span><span class="err">%</span><span class="w"> </span><span class="nv">set lora_name = from_models_folder(&quot;lora&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">cycle=True) %</span><span class="p p-Indicator">}</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">1&quot;</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">      </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">        </span><span class="nt">lora_name</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">lora_name</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Save</span><span class="nv"> </span><span class="s">Image&quot;</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">      </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">        </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Output_{{</span><span class="nv"> </span><span class="s">lora_name</span><span class="nv"> </span><span class="s">}}_Image&quot;&quot;</span>
</span></code></pre></div></p>
<p>It's important to set a variable if you want to reuse a cycled value. Calling a cycling function again in the same tweak file will produce the next value, which is not recommended.</p>
<h2 id="filtering-by-name">Filtering By Name</h2>
<p>To filter a random selection by its contents, use the <code>match</code> or <code>regex_match</code> keyword argument. The following example would select a random lora with "cartoon" in it.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lora</span><span class="nv"> </span><span class="s">Loader</span><span class="nv"> </span><span class="s">1&quot;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="w w-Error"> </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">        </span><span class="nt">lora_name</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">from_models_folder(&quot;lora&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">match=&quot;cartoon&quot;)</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div>
<h2 id="loading-images">Loading Images</h2>
<p>After you've set your ComfyUI folder in <code>Edit&gt;Preferences</code>, you can load an image using the <code>as_image</code> Jinja filter and an absolute path to the image.</p>
<p>For example, this tweak would select a random depth map from a folder.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Depth</span><span class="nv"> </span><span class="s">Map</span><span class="nv"> </span><span class="s">Image&quot;</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">    </span><span class="w w-Error"> </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">from_folder_absolute(&quot;/path/to/depth/images&quot;) | as_image</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<p>This copies the image into your inputs folder and returns its filename, which is what ComfyUI expects. Every time it is evaluated, it will copy the image to the inputs folder, so be mindful when working with large images.</p>
<h2 id="wildcards">Wildcards</h2>
<p>Comfy Tweaker supports standard stable diffusion wildcards. You can set your wildcards directory in <code>Edit&gt;Preferences</code></p>
<p>The following tweak would either set the prompt to "human" or an entry from the "animals.txt" file in your wildcards directory.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Positive</span><span class="nv"> </span><span class="s">Prompt&quot;</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="w w-Error"> </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="s">&quot;a</span><span class="nv"> </span><span class="s">{human|__animals__}</span><span class="nv"> </span><span class="s">wearing</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">baseball</span><span class="nv"> </span><span class="s">cap&quot;</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="nv">wildcards</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<h3 id="backrefs">Backrefs</h3>
<p>If you want to reuse a wildcard later in the prompt, you can use the <code>@</code> backref notation.</p>
<p>For example, any wildcard whose contents end with <code>@animal</code> can be referred to with <code>{@animal}</code> later in the text. The following would produce a prompt describing two of the same animal.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Positive</span><span class="nv"> </span><span class="s">Prompt&quot;</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="w w-Error"> </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="s">&quot;a</span><span class="nv"> </span><span class="s">{bear|cat|dog@animal}</span><span class="nv"> </span><span class="s">wearing</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">baseball</span><span class="nv"> </span><span class="s">cap</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">another</span><span class="nv"> </span><span class="s">{@animal}</span><span class="nv"> </span><span class="s">wearing</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">cowboy</span><span class="nv"> </span><span class="s">hat&quot;</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="nv">wildcards</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div>
<h3 id="custom-weights">Custom Weights</h3>
<p>You can specify the weights of each wildcard entry using the <code>::</code> syntax.</p>
<p>The weights are normalized and do not need to add up to one. For example, the following tweak would select human 2 times, koala 3 times, and bear 5 times for every 10 generations of the prompt.
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">tweaks</span><span class="p">:</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Positive</span><span class="nv"> </span><span class="s">Prompt&quot;</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="w w-Error"> </span><span class="nt">changes</span><span class="p">:</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="s">&quot;a</span><span class="nv"> </span><span class="s">{human::2|koala::3|bear::5}</span><span class="nv"> </span><span class="s">wearing</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">baseball</span><span class="nv"> </span><span class="s">cap&quot;</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="nv">wildcards</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</span></code></pre></div></p>
<p>The weights only influence the random selection of the wildcard, so a perfect ratio of selection is not guaranteed.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>